<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Find Your Utility âš¡</title>
  <style>
    :root {
      --blue-600:#0b64d6;
      --blue-700:#0447a6;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f4f7fb;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#f7fbff 0%, #eef6ff 100%);color:#0f1724;min-height:100vh}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 32px;background:linear-gradient(90deg,rgba(255,255,255,0.6),rgba(255,255,255,0.3));backdrop-filter:blur(6px);box-shadow:0 2px 8px rgba(3,7,18,0.06)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:40px;height:40px;border-radius:8px;background:linear-gradient(135deg,var(--blue-600),var(--blue-700));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;box-shadow:0 6px 18px rgba(11,100,214,0.25)}
    nav a{margin-left:18px;color:var(--muted);text-decoration:none;font-weight:600}
    nav a:hover{color:var(--blue-700)}
    .container{max-width:980px;margin:48px auto;padding:0 20px}
    .hero{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center}
    .panel{background:var(--card);border-radius:14px;padding:28px;box-shadow:0 20px 45px rgba(12,34,98,0.07);}
    .title{font-size:28px;color:var(--blue-700);margin-bottom:8px}
    .subtitle{color:var(--muted);margin-bottom:18px}
    .search-row{display:flex;gap:12px;align-items:center}
    input.zip{flex:1;padding:12px 14px;border-radius:9px;border:1px solid #e6eefb;font-size:16px;background:#fbfdff}
    button.search{background:linear-gradient(180deg,var(--blue-600),var(--blue-700));color:white;padding:12px 18px;border-radius:10px;border:none;font-weight:700;cursor:pointer;box-shadow:0 10px 20px rgba(11,100,214,0.18)}
    button.search:active{transform:translateY(1px)}
    .result-card{margin-top:18px;padding:16px;border-radius:10px;background:linear-gradient(180deg,#f7fbff,#f1f8ff);border:1px solid #e6f0ff}
    .utility-name{font-weight:700;color:#07356b;font-size:18px}
    .meta{color:var(--muted);font-size:14px;margin-top:6px}
    footer{max-width:980px;margin:28px auto;color:var(--muted);font-size:13px;text-align:center}
    /* Romantic popup */
    .popup {
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%, -50%);
      background:rgba(255,255,255,0.8);
      backdrop-filter:blur(12px);
      border-radius:16px;
      padding:24px 28px;
      text-align:center;
      font-size:18px;
      color:#ff4081;
      font-weight:600;
      box-shadow:0 10px 30px rgba(255,64,129,0.3);
      z-index:300;
      animation:fadeIn 0.5s ease forwards;
    }
    @keyframes fadeIn {
      from{opacity:0;transform:translate(-50%,-60%)}
      to{opacity:1;transform:translate(-50%,-50%)}
    }
    @keyframes fadeOut {
      from{opacity:1;transform:translate(-50%,-50%)}
      to{opacity:0;transform:translate(-50%,-40%)}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">âš¡</div>
      <div>
        <div style="font-weight:700;color:var(--blue-700)">Find Your Utility</div>
        <div style="font-size:13px;color:var(--muted)">Locate your electric & gas providers</div>
      </div>
    </div>
    <nav>
      <a href="#">Home</a>
      <a href="#">About</a>
    </nav>
  </header>

  <main class="container">
    <div class="hero">
      <div class="panel">
        <div class="title">Find your local utility provider</div>
        <div class="subtitle">Enter any U.S. ZIP code. Weâ€™ll show the city, state, and a likely utility provider.</div>
        <div class="search-row">
          <input id="zip" class="zip" type="text" maxlength="30" placeholder="Enter ZIP or Secret Word ðŸ’–" />
          <button class="search" id="btnSearch">Search</button>
        </div>
        <div id="status" class="meta" style="margin-top:10px;"></div>
        <div id="result" class="result-card" style="display:none;">
          <div class="utility-name" id="utilityName"></div>
          <div class="meta" id="utilityMeta"></div>
        </div>
      </div>
    </div>
  </main>

  <footer>Â© <span id="year"></span> Find Your Utility â€¢ Love + Energy âš¡</footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const zipInput = document.getElementById('zip');
    const btnSearch = document.getElementById('btnSearch');
    const status = document.getElementById('status');
    const resultCard = document.getElementById('result');
    const utilityNameEl = document.getElementById('utilityName');
    const utilityMetaEl = document.getElementById('utilityMeta');

    // romantic secret messages ðŸ’–
    const secretWords = {
      kakey: "ðŸ’– Hey Kakey, youâ€™re my forever sunshine â€” no power outage can ever dim your glow in my life. â˜€ï¸",
      husband: "ðŸ’• Your husbandâ€™s heart beats only for you. Youâ€™re my reason, my peace, my everything. â¤ï¸",
      wife: "ðŸ’ My beautiful wife â€” youâ€™re not just my partner, youâ€™re my prayer and my paradise. ðŸ’«",
      love: "ðŸ’Œ Love isnâ€™t a word anymore â€” itâ€™s your name written deep in my heart. â¤ï¸â€ðŸ”¥",
      jaan: "ðŸ’— Jaan, youâ€™re the light in my darkest nights â€” my reason, my calm, my forever. ðŸŒ™",
      jaanu: "ðŸ’ž Jaanu, if smiles had a face, it would be yours. You make every heartbeat meaningful. ðŸ’•",
      baby: "ðŸ¼ My baby, youâ€™re my sweetest addiction â€” softer than love, stronger than destiny. ðŸ’–",
      "mera baby": "ðŸ’« Mera baby, youâ€™re my tiny piece of heaven on Earth â€” always precious, always mine. ðŸ¥¹â¤ï¸",
      "mera bacha": "ðŸ§¸ Mera bacha, tu meri sabse pyari feeling hai â€” mujhe sabse zyada sukoon tu deta hai. ðŸ˜˜",
      chuchu: "ðŸ¥ Chuchu, youâ€™re my little spark of joy â€” always chirping happiness into my world! ðŸ’›",
      mithu: "ðŸ¦œ Mithu, my lovely parrot â€” you fill my life with colors, love, and endless chirps of joy. ðŸ’šâœ¨"
    };

    function showPopup(message) {
      const popup = document.createElement('div');
      popup.className = 'popup';
      popup.textContent = message;
      document.body.appendChild(popup);
      setTimeout(() => {
        popup.style.animation = 'fadeOut 0.5s ease forwards';
        setTimeout(() => popup.remove(), 500);
      }, 2500);
    }

    btnSearch.addEventListener('click', async () => {
      const zip = zipInput.value.trim().toLowerCase();
      if (secretWords[zip]) {
        showPopup(secretWords[zip]);
        zipInput.value = "";
        status.textContent = "";
        resultCard.style.display = 'none';
        return;
      }

      if (!/^\d{5}$/.test(zip)) {
        status.textContent = 'Please enter a valid 5-digit ZIP.';
        return;
      }

      status.textContent = 'Searching...';
      resultCard.style.display = 'none';

      try {
        const res = await fetch(`/api/lookup`, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ zip })
        });
        const data = await res.json();
        if (!data.ok) {
          status.textContent = 'No results found.';
          return;
        }
        utilityNameEl.textContent = `Utility: ${data.utility}`;
        utilityMetaEl.textContent = `City: ${data.city} â€¢ State: ${data.state}`;
        resultCard.style.display = 'block';
        status.textContent = '';
      } catch(err) {
        console.error(err);
        status.textContent = 'Network error â€” please try again.';
      }
    });
  </script>
</body>
</html>
