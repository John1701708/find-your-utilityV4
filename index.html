<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Find Your Utility</title>
  <link rel="preconnect" href="https://ucarecdn.com">
  <style>
    :root{
      --blue-600:#0b64d6;
      --blue-700:#0447a6;
      --muted:#6b7280;
      --bg:#f7fbff;
      --card:#ffffff;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,Segoe UI,Roboto,Arial;background:var(--bg);color:#0f1724;min-height:100vh}
    header{display:flex;align-items:center;justify-content:space-between;padding:20px 40px;background:white;box-shadow:0 2px 8px rgba(0,0,0,0.05)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{font-size:28px;color:var(--blue-700)}
    nav a{margin-left:20px;text-decoration:none;color:var(--muted);font-weight:600}
    nav a:hover{color:var(--blue-700)}
    .container{max-width:900px;margin:60px auto;padding:0 20px}
    .panel{background:white;border-radius:14px;padding:30px;box-shadow:0 8px 25px rgba(0,0,0,0.05)}
    .title{font-size:26px;font-weight:700;color:var(--blue-700);margin-bottom:10px}
    .subtitle{color:var(--muted);margin-bottom:20px}
    .search-row{display:flex;gap:10px}
    input.zip{flex:1;padding:12px 14px;border:1px solid #cfd8e3;border-radius:8px;font-size:16px}
    button.search{background:linear-gradient(180deg,var(--blue-600),var(--blue-700));color:white;border:none;padding:12px 20px;border-radius:8px;font-weight:600;cursor:pointer}
    .result-card{margin-top:20px;background:linear-gradient(180deg,#ffffff,#f0f6ff);border-radius:10px;padding:18px;border:1px solid #e2ebfa}
    .utility-name{font-weight:700;font-size:18px;color:#093366}
    .meta{margin-top:8px;font-size:15px;color:var(--muted)}
    footer{text-align:center;margin-top:50px;color:var(--muted);font-size:13px}

    /* support button */
    .support-floating{position:fixed;right:25px;bottom:25px;background:var(--blue-700);color:white;border:none;border-radius:50%;width:58px;height:58px;font-size:22px;cursor:pointer;box-shadow:0 8px 25px rgba(11,100,214,0.3)}
    .support-floating:hover{transform:scale(1.05)}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:1000}
    .modal{background:white;border-radius:12px;padding:24px;max-width:480px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,0.25)}
    .modal h3{color:var(--blue-700);margin-bottom:10px}
    .modal label{display:block;margin-top:12px;font-weight:600;font-size:13px;color:#1f2937}
    .modal input,.modal textarea{width:100%;padding:10px;border:1px solid #d2dbe8;border-radius:8px;margin-top:6px;font-size:14px}
    .modal .actions{display:flex;justify-content:flex-end;gap:10px;margin-top:14px}
    .btn-ghost{background:#f3f6fb;border:1px solid #e2eefb;padding:10px 14px;border-radius:8px;cursor:pointer}
    .btn-primary{background:linear-gradient(180deg,var(--blue-600),var(--blue-700));color:white;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:700}

    /* popup for secret words */
    .popup{
      position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
      background:white;padding:20px 28px;border-radius:14px;
      box-shadow:0 10px 40px rgba(0,0,0,0.2);font-size:16px;
      color:#0f1724;display:none;z-index:2000;text-align:center;
      animation:fadeIn .3s ease;
    }
    @keyframes fadeIn{from{opacity:0;transform:translate(-50%,-48%);}to{opacity:1;transform:translate(-50%,-50%);}}
  </style>
</head>
<body>
  <header>
    <div class="brand"><div class="logo">‚ö°</div><div><b>Find Your Utility</b></div></div>
    <nav><a href="#">Home</a><a href="#">About</a></nav>
  </header>

  <main class="container">
    <div class="panel">
      <div class="title">Find your local utility provider</div>
      <div class="subtitle">Enter any U.S. ZIP code ‚Äî we‚Äôll show your electric ‚ö° and gas üî• utilities.</div>
      <div class="search-row">
        <input id="zip" class="zip" maxlength="5" placeholder="Enter ZIP code" />
        <button class="search" id="btnSearch">Search</button>
      </div>
      <div id="status" class="meta" style="margin-top:10px;"></div>
      <div id="result" class="result-card" style="display:none;">
        <div class="utility-name" id="utilityName"></div>
        <div class="meta" id="utilityMeta"></div>
      </div>
    </div>
  </main>

  <footer>¬© 2025 Find Your Utility</footer>

  <button class="support-floating" id="openSupport">üí¨</button>

  <div id="modal" class="modal-backdrop">
    <div class="modal">
      <h3>Support</h3>
      <form id="supportForm">
        <label>Title</label>
        <input id="title" required />
        <label>Message</label>
        <textarea id="message" rows="4" required></textarea>
        <!-- multiple files uploadcare -->
        <input type="hidden" role="uploadcare-uploader" name="attachment" data-public-key="93421cc4c0211b5c1d86" data-multiple="true" />
        <div class="actions">
          <button type="button" class="btn-ghost" id="closeModal">Cancel</button>
          <button type="submit" class="btn-primary">Send</button>
        </div>
      </form>
    </div>
  </div>

  <div class="popup" id="popup"></div>

  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js" defer></script>

  <script>
    const modal=document.getElementById('modal');
    document.getElementById('openSupport').onclick=()=>modal.style.display='flex';
    document.getElementById('closeModal').onclick=()=>modal.style.display='none';
    window.onclick=e=>{if(e.target===modal)modal.style.display='none';};

    const result=document.getElementById('result');
    const utilityName=document.getElementById('utilityName');
    const utilityMeta=document.getElementById('utilityMeta');
    const status=document.getElementById('status');
    const popup=document.getElementById('popup');

    // Secret words mapping
    const secrets={
      kakey:"üíñ ‚ÄúHey Kakey, you‚Äôre my forever sunshine ‚Äî no power outage can ever dim your glow in my life.‚Äù ‚òÄÔ∏è",
      husband:"üíï ‚ÄúYour husband‚Äôs heart beats only for you. You‚Äôre my reason, my peace, my everything.‚Äù ‚ù§Ô∏è",
      wife:"üíç ‚ÄúMy beautiful wife ‚Äî you‚Äôre not just my partner, you‚Äôre my prayer and my paradise.‚Äù üí´",
      love:"üíå ‚ÄúLove isn‚Äôt a word anymore ‚Äî it‚Äôs your name written deep in my heart.‚Äù ‚ù§Ô∏è‚Äçüî•",
      jaan:"üíó ‚ÄúJaan, you‚Äôre the light in my darkest nights ‚Äî my reason, my calm, my forever.‚Äù üåô",
      jaanu:"üíû ‚ÄúJaanu, if smiles had a face, it would be yours. You make every heartbeat meaningful.‚Äù üíï",
      baby:"üçº ‚ÄúMy baby, you‚Äôre my sweetest addiction ‚Äî softer than love, stronger than destiny.‚Äù üíñ",
      "mera baby":"üí´ ‚ÄúMera baby, you‚Äôre my tiny piece of heaven on Earth ‚Äî always precious, always mine.‚Äù ü•π‚ù§Ô∏è",
      "mera bacha":"üß∏ ‚ÄúMera bacha, tu meri sabse pyari feeling hai ‚Äî mujhe sabse zyada sukoon tu deta hai.‚Äù üòò",
      chuchu:"üê• ‚ÄúChuchu, you‚Äôre my little spark of joy ‚Äî always chirping happiness into my world!‚Äù üíõ",
      mithu:"ü¶ú ‚ÄúMithu, my lovely parrot ‚Äî you fill my life with colors, love, and endless chirps of joy.‚Äù üíö‚ú®"
    };

    document.getElementById('btnSearch').onclick=async()=>{
      const zip=document.getElementById('zip').value.trim().toLowerCase();
      if(secrets[zip]){
        popup.innerHTML=secrets[zip];
        popup.style.display='block';
        document.getElementById('zip').value='';
        setTimeout(()=>popup.style.display='none',5000); // ‚è≥ show for 5 seconds now
        return;
      }
      if(!/^[0-9]{5}$/.test(zip)){status.textContent='Enter a valid ZIP code.';return;}
      status.textContent='Searching...';
      result.style.display='none';
      try{
        const res=await fetch('/api/lookup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({zip})});
        const j=await res.json();
        if(!j.ok){status.textContent=j.error||'Error.';return;}
        const d=j.data;
        utilityName.innerHTML=`Utility: ${d.electric} ‚ö°<br>Gas: ${d.gas} üî•`;
        utilityMeta.innerHTML=`City: ${d.city} ‚Ä¢ State: ${d.state}`;
        status.textContent='';
        result.style.display='block';
      }catch(e){status.textContent='Network error.';}
    };

    // Support form
    const supportForm=document.getElementById('supportForm');
    supportForm.addEventListener('submit',async e=>{
      e.preventDefault();
      const t=document.getElementById('title').value,m=document.getElementById('message').value,a=document.querySelector('input[name="attachment"]').value;
      await fetch('https://formspree.io/f/mgvnbbaw',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:t,message:m,attachment:a})});
      modal.style.display='none';
      supportForm.reset();
      const widget=uploadcare.Widget('[role=uploadcare-uploader]');
      widget.value(null);
    });
  </script>
</body>
</html>
